trigger:
- master

pool: Default

steps: 
- task: replacetokens@3
  displayName: Perform variable substitution in java file
  inputs:
    rootDirectory: '/Users/dejanadmin/_work/1/s/src/main/java'
    targetFiles: '**\*.properties'
    encoding: 'auto'
    writeBOM: false
    verbosity: 'detailed'
    actionOnMissing: 'warn'
    keepToken: true
    tokenPrefix: '#{'
    tokenSuffix: '}#'
    useLegacyPattern: false
    enableTelemetry: true

- task: Maven@3
  inputs:
    mavenPomFile: 'pom.xml'
    goals: clean test
    publishJUnitResults: true
    javaHomeOption: 'JDKVersion'
    mavenVersionOption: 'Default'
    mavenAuthenticateFeed: false
    testResultsFiles: '**/surefire-reports/TEST-*.xml'
    effectivePomSkip: false
    sonarQubeRunAnalysis: false
